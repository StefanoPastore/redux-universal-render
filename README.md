## Redux Universal render

[![Build Status](https://travis-ci.org/StefanoPastore/redux-universal-render.svg?branch=master)](https://travis-ci.org/StefanoPastore/redux-universal-render) [![Coverage Status](https://coveralls.io/repos/github/StefanoPastore/redux-universal-render/badge.svg?branch=master)](https://coveralls.io/github/StefanoPastore/redux-universal-render?branch=master)

### Dependencies
[redux-thunk](https://github.com/gaearon/redux-thunk)

### Why you need?
It is necessary because you must wait data is loaded before render page on server side.

### Usage
This module supply for you middleware, reducer and render function to apply on server and client.

Example store config:

```js
import { createStore, compose, applyMiddleware, combineReducers } from 'redux';
import {
  reduxUniversalRenderReducer,
  reduxUniversalRenderMiddleware,
} from 'redux-universal-render';
import thunk from 'redux-thunk';
import reducers from './reducers';

const initialState = {};

const store = createStore(
  combineReducers({
    ...reducers,
    reduxUniversalRenderReducer,
  }),
  initialState,
  compose(
    applyMiddleware(
      reduxUniversalRenderMiddleware,
      thunk
    ),
  )
);
```

Example server side rendering:

```js
import { reduxUniversalRender } from 'redux-universal-render';

match({ routes, location: req.originalUrl }, (error, redirectLocation, renderProps) => {
    const render = <Provider store={store}>
      <RouterContext {...renderProps} />
    </Provider>;
    reduxUniversalRender(
      store,
      render,
      () => {
        const content = renderToString(render);
        const page = renderToStaticMarkup(
          <HTML content={content} />
        );

        res.send(`<!doctype html>\n${page}`);
      }
    );
  });
});
```

Example actions creators:

```js
import { createAsyncActions, createSyncActions } from 'redux-universal-render';

const asyncName = 'asyncName';

export const ASYNC_ACTION = 'ASYNC_ACTION';
export const syncActionCreator = () => (createSyncActions(asyncName)({ type: ASYNC_ACTION }));

const asyncAction = dispatch => {
  setTimeout(() => {
    dispatch(syncActionCreator());
  }, 200);
};

export const asyncActionCreator = () => (createAsyncActions(asyncName)(asyncAction));
```

### Remember
Remember apply middleware before redux-thunk.

### API

  - reduxUniversalRender:
    - parameters:
      - store (required): Redux store,
      - render component (required): React component to render,
      - callback (required): Function, it is called when all async actions, created with createAsyncActions util, dispatched are ended,
      - renderMethod (optional, default `ReactDOM.renderToStaticMarkup`): Function that render the react components on server.

  - createAsyncActions:
    This function return another function that return asyncronous action creator generated. This is necessary because we need to wait fetching data are ended and this module necesary a unique name to store async actions and when them are ended,
    - parameters:
      - asyncName (required): Must be a string or function that return a string always unique. function returned:
        - parameters:
          - method (required): At this method will be add a `asyncName` property generated by before parameter.

  - createSyncActions: This function return another function that return action creator generated with `asyncName` property.
    - parameters:
      - asyncName (required): Must be a string or function that return a string math with `asyncName` of the async function corresponding. function returned:
        - parameters:
          - action (required): This action can be a function that return an object or object. At this action will be append `asyncName` property generated.
